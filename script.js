document.addEventListener('DOMContentLoaded', () => {
    console.log('DOM fully loaded and parsed');

    const categories = {
        "Packages": {
            en: "Packages",
            ar: "ุจุงูุฌุงุช",
            services: [
                {
                    name_en: "Haircut & Beard Trim",
                    name_ar: "ุญูุงูุฉ ุงูุดุนุฑ ูุงูุฏูู",
                    duration: "40m",
                    price: 50,
                    description_en: "Includes haircut and beard trim, along with a hair wash using Keune shampoo and complimentary scented towels",
                    description_ar: "ุชุดูู ูุต ุงูุดุนุฑ ูุงูุฐูู - ุบุณูู ุงูุดุนุฑ ูููุท ุตุญูุฉ ูุนุทุฑุฉ ูุฌุงููุฉ"
                },
                {
                    name_en: "EKKA Package",
                    name_ar: "ุจุงูุฉ ุฅููููู",
                    duration: "1h",
                    price: 150,
                    description_en: "Haircut with beard trimming\nSteam facial cleansing - exfoliation\nDuring facial cleansing: Relaxing massage using a massaging device\nWaxing for the face, ear, and nose\nHair oil treatment\nHair wash\nBlow-drying\nNose strip (blackhead removal)\n\nComplimentary sanitized cold and hot towels\nThis offer does not include any other discounts.",
                    description_ar: "ูุต ุดุนุฑ ูุน ุฐูู\nุชูุธูู ุงูุจุดุฑุฉ ุจุงูุจุฎุงุฑ - ุตููุฑุฉ\nููุช ุชูุธูู ุงูุจุดุฑุฉ ูุณุงุฌ ุงุณุชุฑุฎุงุฆู ุจุงุณุชุฎุฏุงู ุฌูุงุฒ ุงููุณุงุฌ\nุดูุน ูููุฌู ูุงูุงุฐู ูุงูุงูู\nุญูุงู ุฒูุช ููุดุนุฑ\nุบุณูู ุดุนุฑ\nุชุฌููู ุงุณุชุดูุงุฑ\nูุฒูู ุงูู"
                },
                {
                    name_en: "EKKA Extra Package",
                    name_ar: "ุจุงูุฉ ุฅููููู ุงูุณุชุฑุง",
                    duration: "1h 30m",
                    price: 250,
                    description_en: "Ekkah Essential Package + Keratin Hair Treatments by Kune Brand:\n\nImpressive results:\n* Up to 80% reduction in internal hair damage\n** Hair becomes twice as soft after just one use.\nPerfect for brides-to-be โค๏ธ",
                    description_ar: "ุจุงูุฉ ุฅูู ุงูุฃุณุงุณุฉ   ุจุงูุฅุถุงูุฉ ุนูุงุฌุงุช ุงูุดุนุฑ ุจุงูููุฑุงุชูู\nูู ุจุฑุงูุฏ: ูููู\n\nูุชุงุฆุฌ ุฑุงุฆุนุฉ:\n- ุชูููู ุงูุถุฑุฑ ุงูุฏุงุฎูู ููุดุนุฑ ุจูุณุจุฉ ุชุตู ุฅูู 80ูช\n- ุดุนุฑ ูุตุจุญ ูุงุนููุง ุจููุฏุงุฑ ุงูุถุนู ุจุนุฏ ุงุณุชุฎุฏุงู ูุงุญุฏ ููุท.\n\nููุงุณุจุฉ ููุนุฑุณุงู โค"
                },
                {
                    name_en: "Hair Care",
                    name_ar: "ุจุงูุฉ ุงูุนูุงูุฉ ุจุงูุดุนุฑ",
                    duration: "50m",
                    price: 105,
                    description_en: "Haircut\nScalp Deep Cleansing\nHair oil treatment nourishes and moisturizes the scalp, while also promoting hair growth and giving it shine and health.\nBrand: Keune\nHair wash: Essential Shampoo\nBrand: Keune",
                    description_ar: "ูุต ุงูุดุนุฑ\nุญูุงู ุงูุฒูุช ูุบุฐู ููุฑุทุจ ูุฑูุฉ ุงูุฑุฃุณ ูุงูุดุนุฑ ูุนุฒุฒ ููู ุงูุดุนุฑ ููููุญู ููุนุงููุง ูุตุญุฉ\nุจุฑุงูุฏ: ูููู\nุบุณูู ุงูุดุนุฑ: ุดุงูุจู ุงุณููุดุงู\nุจุฑุงูุฏ: ูููู\nุงุณุชุดูุงุฑ ูุชุตููู ุงูุดุนุฑ"
                },
                {
                    name_en: "Hair Care + Scalp Deep Cleansing",
                    name_ar: "ุจุงูุฉ ุงูุนูุงูุฉ ุจุงูุดุนุฑ + ุชูุธูู ูุฑูุฉ ุงูุฑุฃุณ",
                    duration: "1h 15m",
                    price: 175,
                    description_en: "",
                    description_ar: ""
                }
            ]
        },
        "HairServices": {
            en: "Hair Services",
            ar: "ุฎุฏูุงุช ุงูุดุนุฑ",
            services: [
                {
                    name_en: "Hair Cut | Styling & Fading",
                    name_ar: "ุญูุงูุฉ ุงูุดุนุฑ - ููุต ูุชุฏุฑูุฌ",
                    duration: "30m",
                    price: 30,
                    description_en: "Specialized in the latest styles of hair cutting and trimming. Using the machine for a single length, while the fading is done professionally.",
                    description_ar: "ูุฎุชุตูู ูู ุฃุญุฏุซ ุณุชุงููุงุช ูุต ูุชูุฐูุจ ุงูุดุนุฑ. ุจุงูููููุฉ ูููู ููุงุณ ูุงุญุฏ ููุท ุงูุง ุงูุชุฏุฑูุฌ ูููุง ุงูุงุญุชุฑุงู ๐คฉ"
                },
                {
                    name_en: "Hair Cut | Long Hair",
                    name_ar: "ุญูุงูุฉ ุงูุดุนุฑ - ุดุนุฑ ุทููู",
                    duration: "45m",
                    price: 40,
                    description_en: "Specialized in the latest styles of hair cutting and trimming. Using the machine for a single length, while the fading is done professionally.",
                    description_ar: "ูุฎุชุตูู ูู ุฃุญุฏุซ ุณุชุงููุงุช ูุต ูุชูุฐูุจ ุงูุดุนุฑ. ุจุงูููููุฉ ูููู ููุงุณ ูุงุญุฏ ููุท ุงูุง ุงูุชุฏุฑูุฌ ูููุง ุงูุงุญุชุฑุงู ๐คฉ"
                },
                {
                    name_en: "Hair Dye | Bigen dye",
                    name_ar: "ุตุจุบุฉ ุดุนุฑ - ุตุจุบุฉ ุจูุฌู",
                    duration: "15m",
                    price: 40,
                    description_en: "Bigen dye in black color.",
                    description_ar: "ุตุจุบุฉ ุจูุฌู ููู ุฃุณูุฏ"
                },
                {
                    name_en: "Hair Dye | Keune Dutch Brand",
                    name_ar: "ุตุจุบุฉ ุดุนุฑ - ุตุจุบุฉ ูููู ุงูููููุฏูุฉ",
                    duration: "15m",
                    price: 60,
                    description_en: "Keune dye, the Dutch brand with natural colors",
                    description_ar: "- ุตุจุบุฉ ูููู ุงูุจุฑุงูุฏ ุงูููููุฏู ุจุฃููุงู ุทุจูุนูุฉ\n-"
                },
                {
                    name_en: "Hair Wash",
                    name_ar: "ุบุณูู ุงูุดุนุฑ",
                    duration: "5m",
                    price: 10,
                    description_en: "We use shampoos from the Dutch brand: Keune.",
                    description_ar: "ูุณุชุฎุฏู ุดุงูุจููุงุช ุงูุจุฑุงูุฏ ุงูููููุฏู: ูููู"
                },
                {
                    name_en: "Hair Styling",
                    name_ar: "ุงุณุชุดูุงุฑ ูุชุตููู ุงูุดุนุฑ",
                    duration: "5m",
                    price: 15,
                    description_en: "Blow-drying and styling hair using what's needed: wax and hair styling products from the finest global brands.",
                    description_ar: "ุงุณุชุดูุงุฑ ูุชุตููู ุงูุดุนุฑ ูุงุณุชุฎุฏุงู ูุง ููุฒู: ูุงูุณ ููุตููุงุช ุงูุดุนุฑ ูู ุฃุฌูุฏ ุงูุจุฑุงูุฏุงุช ุงูุนุงูููุฉ"
                },
                {
                    name_en: "Hair Oil Bath",
                    name_ar: "ุญูุงู ุฒูุช ุงูุดุนุฑ",
                    duration: "10m",
                    price: 50,
                    description_en: "Hair oil bath. Brand: Keune.\n\nFree hair wash with specialized Keune shampoo, drying, and styling.",
                    description_ar: "ุญูุงู ุฒูุช ุดุนุฑ. ุจุฑุงูุฏ: ูููู\n\n- ุบุณูู ุงูุดุนุฑ ุจุดุงูุจู ูููู ูุฎุชุต ูุชุฌูููู ูุชุตูููู ูุฌุงูู"
                },
                {
                    name_en: "Hair Coloring (Highlights)",
                    name_ar: "ุตุจุบุฉ ููุด",
                    duration: "1h",
                    price: 350,
                    description_en: "Upgrade your style with our signature gray and silver highlights, tailored for the modern man. Embrace a distinguished look with a touch of sophistication.",
                    description_ar: "ุญุฏูุซ ุฃุณููุจู ูุน ุฎุตูุงุชูุง ุงูุฑูุงุฏูุฉ ูุงููุถูุฉ ุงูุฎุงุตุฉุ ุงููุตููุฉ ููุฑุฌู ุงูุนุตุฑู. ุงุนุชูุฏ ูุธูุฑูุง ูููุฒูุง ูุถูู ููุณุฉ ูู ุงูุฑูู"
                },
                {
                    name_en: "Hair Keratin | Short Hair",
                    name_ar: "ุญูุงู ููุฑุงุชูู ูุนูุงุฌ ููุดุนุฑ - ุดุนุฑ ูุตูุฑ",
                    duration: "30m",
                    price: 100,
                    description_en: "Oil bath (specialized) with Miracle Elixir Keratin ampoules. Brand: Keune.\nGreat results: Up to 80% reduction in internal hair damage. Hair becomes twice as soft after just one use.\n\nFree hair wash with specialized Keune shampoo, drying, and styling.",
                    description_ar: "ุญูุงู ุฒูุช (ูุฎุชุต) ูุน ุงูุจููุงุช ููุฑุงุชูู ููุฑุงูู ุงููุณูุฑ. ุจุฑุงูุฏ: ูููู. ูุชุงุฆุฌ ุฑุงุฆุนุฉ: ุชูููู ุงูุถุฑุฑ ุงูุฏุงุฎูู ููุดุนุฑ ุจูุณุจุฉ ุชุตู ุฅูู - 80%. ุดุนุฑ ูุตุจุญ ูุงุนููุง ุจููุฏุงุฑ ุงูุถุนู ุจุนุฏ ุงุณุชุฎุฏุงู ูุงุญุฏ ููุท.\n\n- ุบุณูู ุงูุดุนุฑ ุจุดุงูุจู ูููู ูุฎุชุต ูุชุฌูููู ูุชุตูููู ูุฌุงูู"
                },
                {
                    name_en: "Hair Keratin | Long Hair",
                    name_ar: "ุญูุงู ููุฑุงุชูู ูุนูุงุฌ ููุดุนุฑ - ุดุนุฑ ุทููู",
                    duration: "30m",
                    price: 120,
                    description_en: "Oil bath (specialized) with Miracle Elixir Keratin ampoules. Brand: Keune.\nGreat results: Up to 80% reduction in internal hair damage. Hair becomes twice as soft after just one use.\n\nFree hair wash with specialized Keune shampoo, drying, and styling.",
                    description_ar: "ุญูุงู ุฒูุช (ูุฎุชุต) ูุน ุงูุจููุงุช ููุฑุงุชูู ููุฑุงูู ุงููุณูุฑ. ุจุฑุงูุฏ: ูููู. ูุชุงุฆุฌ ุฑุงุฆุนุฉ: ุชูููู ุงูุถุฑุฑ ุงูุฏุงุฎูู ููุดุนุฑ ุจูุณุจุฉ ุชุตู ุฅูู - 80%. ุดุนุฑ ูุตุจุญ ูุงุนููุง ุจููุฏุงุฑ ุงูุถุนู ุจุนุฏ ุงุณุชุฎุฏุงู ูุงุญุฏ ููุท.\n\n- ุบุณูู ุงูุดุนุฑ ุจุดุงูุจู ูููู ูุฎุชุต ูุชุฌูููู ูุชุตูููู ูุฌุงูู"
                },
                {
                    name_en: "Hair Protein | Short Hair",
                    name_ar: "ุจุฑูุชูู ููุดุนุฑ - ุดุนุฑ ูุตูุฑ",
                    duration: "2h",
                    price: 300,
                    description_en: "Our hair therapy relies on specific types of protein to fill in gaps for a straightened, healthier appearance. These gaps are created when hair loses some of its protein molecules.",
                    description_ar: "ูุนุชูุฏ ุนูุงุฌ ุงูุดุนุฑ ุจุงูุจุฑูุชูู ุนูู ุฃููุงุน ูุนููุฉ ูู ุงูุจุฑูุชูู ูุชู ููุฆ ูุฑุงุบุงุช ุงูุดุนุฑ ุจูุง ููุญุตูู ุนูู ุดุนุฑ ููุฑูุฏ ุฐู ูุธูุฑ ุตุญูุ ุชูู ุงููุฑุงุบุงุช ุงูุชู ุชุณุจุจ ุจูุง ุชุณุงูุท ุงูุดุนุฑ ูุจุนุถ ุฌุฒูุฆุงุช ุงูุจุฑูุชูู."
                },
                {
                    name_en: "Hair Protein | Long Hair",
                    name_ar: "ุจุฑูุชูู ููุดุนุฑ - ุดุนุฑ ุทููู",
                    duration: "2h 30m",
                    price: 350,
                    description_en: "Our hair therapy relies on specific types of protein to fill in gaps for a straightened, healthier appearance. These gaps are created when hair loses some of its protein molecules.",
                    description_ar: "ูุนุชูุฏ ุนูุงุฌ ุงูุดุนุฑ ุจุงูุจุฑูุชูู ุนูู ุฃููุงุน ูุนููุฉ ูู ุงูุจุฑูุชูู ูุชู ููุฆ ูุฑุงุบุงุช ุงูุดุนุฑ ุจูุง ููุญุตูู ุนูู ุดุนุฑ ููุฑูุฏ ุฐู ูุธูุฑ ุตุญูุ ุชูู ุงููุฑุงุบุงุช ุงูุชู ุชุณุจุจ ุจูุง ุชุณุงูุท ุงูุดุนุฑ ูุจุนุถ ุฌุฒูุฆุงุช ุงูุจุฑูุชูู."
                },
                {
                    name_en: "Scalp Deep Cleansing",
                    name_ar: "ุชูุธูู ูุฑูุฉ ุงูุฑุฃุณ ุงูุนููู",
                    duration: "25m",
                    price: 70,
                    description_en: "Scalp deep cleansing service. Recommended for those with oily hair and scalp suffering from dandruff.\n\nThe product is organic and highly effective. Brand: Dutch Keune.",
                    description_ar: "ุฎุฏูุฉ ุชูุธูู ูุฑูุฉ ุงูุฑุฃุณ. ููุตู ุจูุง ูุฃุตุญุงุจ ุงูุดุนุฑ ุงูุฏููู ููุฑูุฉ ุงูุฑุฃุณ ุงูุชู ุชุนุงูู ูู ูุดุฑุฉ.\n\nุงูููุชุฌ ุนุถูู ููู ุงููุนุงููุฉ. ุงูุจุฑุงูุฏ: ูููู ุงูููููุฏูุฉ"
                },
                {
                    name_en: "Hair Dye (no supplies needed)",
                    name_ar: "ุชุทุจูู ุตุจุบุฉ ุงูุดุนุฑ",
                    duration: "25m",
                    price: 25,
                    description_en: "The client has the right to provide the dye that suits them, and we will execute their request professionally. Free hair wash and blow-drying.",
                    description_ar: "ููุนููู ุญู ุชูููุฑ ุงูุตูุบุฉ ุงูุชู ุชูุงุณุจู ูุนูููุง - ุชููุฐ ุทูุจู ุจูู ุงุญุชุฑุงููุฉ. ุบุณู ุดุนุฑ ูุชุฌูููู ุงุณุชุดูุงุฑ ูุฌุงูู"
                },
                {
                    name_en: "Haircut (Girls) | Short Hair",
                    name_ar: "ูุต ุดุนุฑ - ุจูุงุช ุฃุทูุงู - ุดุนุฑ ูุตูุฑ",
                    duration: "40m",
                    price: 50,
                    description_en: "Haircut and trimming... by the most skilled barbers in the salon.",
                    description_ar: "ูุต ุดุนุฑ ูุชุฑุชูุจ ุงุทุฑุงูู .. ุจูุฏ ุฃููุฑ ุญูุงููู ุงูุตุงููู"
                },
                {
                    name_en: "Haircut (Girls) | Long Hair",
                    name_ar: "ูุต ุดุนุฑ - ุจูุงุช ุฃุทูุงู - ุดุนุฑ ุทููู",
                    duration: "50m",
                    price: 80,
                    description_en: "Haircut and trimming... by the most skilled barbers in the salon.",
                    description_ar: "ูุต ุดุนุฑ ูุชุฑุชูุจ ุงุทุฑุงูู .. ุจูุฏ ุฃููุฑ ุญูุงููู ุงูุตุงููู"
                },
                {
                    name_en: "Hair Dryer (Girls)",
                    name_ar: "ุงุณุชุดูุงุฑ ูุชุตููู ุงูุดุนุฑ - ุจูุงุช ุงุทูุงู",
                    duration: "35m",
                    price: 50,
                    description_en: "Using Babyliss and blow dryer.",
                    description_ar: "ุจุงุณุชุฎุฏุงู ุงูุจุจููุณ ูุงูุงุณุชุดูุงุฑ"
                }
            ]
        },
        "BeardServices": {
            en: "Beard Services",
            ar: "ุฎุฏูุงุช ุงููุญูุฉ",
            services: [
                {
                    name_en: "Beard Shaving Or Trimming",
                    name_ar: "ุญูุงูุฉ ุงูุฏูู",
                    duration: "25m",
                    price: 25,
                    description_en: "The service includes shaving or trimming the beard (and optional threading), along with a sanitized cold or hot towel",
                    description_ar: "ุชุดูู ุงูุฎุฏูุฉ ุญูู ุฃู ุชุฎููู ุงูุฐูู (ูุฅุฒุงูุฉ ุงูุดุนุฑ ุจุงูุฎูุท ุญุณุจ ุงูุฑุบุจุฉ)  ูุน ููุดูู ูุนููุฉ ุจุงุฑุฏุฉ ุงู ุญุงุฑุฉ"
                },
                {
                    name_en: "Beard Dye - Stubble",
                    name_ar: "ุตุจุบุฉ ุงูุฏูู - ุงูุณูุณููุฉ",
                    duration: "15m",
                    price: 25,
                    description_en: "Bigen dye",
                    description_ar: "ุตุจุบุฉ ุจูุฌู"
                },
                {
                    name_en: "Beard Dye - Full Beard",
                    name_ar: "ุตุจุบุฉ ุงูุฏูู - ุงููุญูุฉ ูุงููุฉ",
                    duration: "30m",
                    price: 30,
                    description_en: "Bigen dye",
                    description_ar: "ุตุจุบุฉ ุจูุฌู"
                },
                {
                    name_en: "Moustache Dye",
                    name_ar: "ุตุจุบุฉ ุงูุดูุจ",
                    duration: "10m",
                    price: 10,
                    description_en: "",
                    description_ar: ""
                },
                {
                    name_en: "Hair Dye (No Supplies Needed)",
                    name_ar: "ุชุทุจูู ุตุจุบุฉ ุงูุฏูู",
                    duration: "15m",
                    price: 15,
                    description_en: "The client has the right to provide the dye that suits them, and we will execute their request professionally\n\nFree hot or cold towel",
                    description_ar: "ููุนููู ุญู ุชูููุฑ ุงูุตูุบุฉ ุงูุชู ุชูุงุณุจู ูุนูููุง - ุชููุฐ ุทูุจู ุจูู ุงุญุชุฑุงููุฉ\n\nููุทุฉ ุญุงุฑุฉ ุฃู ุจุงุฑุฏุฉ ูุฌุงูุง"
                }
            ]
        },
        "FacialCare": {
            en: "Facial Care Services",
            ar: "ุฎุฏูุงุช ุงูุจุดุฑุฉ",
            services: [
                {
                    name_en: "Classic Quick Face Cleaning",
                    name_ar: "ุตููุฑุฉ ูุฌู ุณุฑูุนุฉ ููุงุณูู",
                    duration: "5m",
                    price: 15,
                    description_en: "Quick facial Cleaning, removing dead skin and enhancing collagen in the skin\n\nComplimentary sanitized towels (hot and cold) included",
                    description_ar: "ุตููุฑุฉ ุณุฑูุนุฉ ูููุฌูุ ุงุฒุงูุฉ ุงูุฌูุฏ ุงูููุช ูุชุนุฒูุฒ ุงููููุงุฌูู ูู ุงูุจุดุฑุฉ\n\nููุท ูุนููุฉ (ุญุงุฑ ูุจุงุฑุฏ) ูุฌุงููุฉ"
                },
                {
                    name_en: "Premium Quick Face Cleaning",
                    name_ar: "ุตููุฑุฉ ูุฌู ุณุฑูุนุฉ ุจุฑููููู",
                    duration: "15m",
                    price: 25,
                    description_en: "Indulge in our Premium Quick Face Cleaning for a luxurious, revitalizing experience. Using Neutrogena Fresh & Clear Daily Exfoliator and Himalaya Charcoal Face Mask, our experts will deeply cleanse and rejuvenate your skin, leaving it smooth, clear, and radiant. Book now for a premium glow!",
                    description_ar: "ุงุณุชูุชุน ุจุชุฌุฑุจุฉ ูุงุฎุฑุฉ ูููุนุดุฉ ูุน ุฎุฏูุฉ ุตููุฑุฉ ูุฌู ุณุฑูุนุฉ ุจุฑููููู. ุจุงุณุชุฎุฏุงู ุงูููุดุฑ ุงููููู ุงูููุนุด ูู ูููุชุฑูุฌููุง ูููุงุน ุงููุญู ูู ูููุงูุงูุงุ ุณูููู ุฎุจุฑุงุคูุง ุจุชูุธูู ูุชุฌุฏูุฏ ุจุดุฑุชู ุจุนููุ ููุง ูุชุฑููุง ูุงุนูุฉ ููููุฉ ููุดุฑูุฉ. ุงุญุฌุฒ ุงูุขู ูุชุฃูู ุจุฑููููู!\n\nููุท ูุนููุฉ (ุญุงุฑ ูุจุงุฑุฏ) ูุฌุงููุฉ"
                },
                {
                    name_en: "Classic Deep Skin Cleansing",
                    name_ar: "ุชูุธูู ุนููู ููุจุดุฑุฉ ุจุงูุจุฎุงุฑ ููุงุณูู",
                    duration: "25m",
                    price: 50,
                    description_en: "Our facial cleansing blends care, deep hydration, offering a relaxing experience. Here's how:\n\n* Steam: Activate skin, open pores.\n* Blackhead Removal: Gentle techniques clear pores of impurities.\n* Exfoliation: Special facial scrub promotes circulation, vibrant skin.\n* Mask: Soothing, nourishing mask hydrates, reduces irritation.\n\nOur facial cleansing achieves healthy, glowing skin. \nLeave Ekkah Salon renewed and wonderful",
                    description_ar: "ุฎุฏูุฉ ุชูุธูู ุงููุฌู ุชุฌูุน ุจูู ุงูุงูุชูุงู ูุงูุชุฑุทูุจ ุงูุนููู ูุจุดุฑุชู ุจุชุฌุฑุจุฉ ูุฑูุญุฉ ูููุนุดุฉ. ุชุนุฑู ุนูู ุชูููุฐูุง:\n\n* ุงูุจุฎุงุฑ (ุจูุงุก ุงููุฑุฏ): ุชูุดูุท ุงูุจุดุฑุฉุ ูุชุญ ุงููุณุงู \ููููุงุฆุฏ ูุงุก ุงููุฑุฏ: 1)ูุณุงุนุฏ ุนูู ุชูุฏุฆุฉ ุงูุฌูุฏุ 2)ูููู ูู ุงุญูุฑุงุฑ ุงูุฌูุฏุ 3)ูุญุชูู ุนูู ูุถุงุฏุงุช ุงูุฃูุณุฏุฉ ูุจุดุฑุฉ ูููุง ูุธุงุฑุฉุ 4)ุฑุงุฆุญุชู ุงูุทูุจุฉ ุชุฎูู ุงูุชูุชุฑ\n* ุฅุฒุงูุฉ ุงูุฑุคูุณ ุงูุณูุฏุงุก: ุชูููุงุช ูุทููุฉ ุชููู ุงููุณุงู ูู ุงูุดูุงุฆุจ\n* ููุดุฑ: ููุธู ุฎุงุต ููุดุท ุงูุฏูุฑุฉ ุงูุฏูููุฉ ููููุญ ุจุดุฑุฉ ูุชุฃููุฉ\n* ุงูููุงุน: ููุฏุฆ ููุบุฐู ูุฑุทุจ ููููู ุงูุชููุฌ\n\nุชูุธูู ุงููุฌู ููุญูู ุจุดุฑุฉ ุตุญูุฉ ููุดุฑูุฉ. \nุงุฎุชุจุฑู ูู ุตุงููู ุฅูู ูุงุณุชูุชุน ุจุจุดุฑุฉ ุฌุฏูุฏุฉ ููุชุฌุฏุฏุฉ."
                },
                {
                    name_en: "Premium Deep Skin Cleansing",
                    name_ar: "ุชูุธูู ุนููู ููุจุดุฑุฉ ุจุฑููููู",
                    duration: "20m",
                    price: 75,
                    description_en: "Indulge in a luxurious and refreshing experience with our Premium Deep Skin Cleansing with steam. This service combines care and deep hydration for your skin with a thorough cleansing and complete renewal. We offer you:\n\n1. Steam (with rose water)\n- Activates the skin and opens pores.\n- Benefits of rose water: helps soothe the skin, reduces redness, contains antioxidants for a fresh look, and its pleasant scent relieves stress.\n\n2. Blackhead Removal\n- Gentle techniques cleanse pores of impurities.\n\n3. Refreshing Neutrogena Scrub\n- Using Neutrogena's refreshing daily scrub, we gently exfoliate to remove dead cells, leaving your skin smooth and clear.\n\n4. Himalaya Charcoal Mask\n- Apply the Himalaya Charcoal Mask to absorb oils and impurities from the pores, leaving the skin clean and refreshed.\n- The mask is removed with a cold towel to reduce irritation and hydrate the skin.\n\n== Complimentary sanitized hot and cold towels ==\n\nBook now for a premium glow and enjoy healthy and radiant skin.",
                    description_ar: "ุงุณุชูุชุน ุจุชุฌุฑุจุฉ ูุงุฎุฑุฉ ูููุนุดุฉ ูุน ุฎุฏูุฉ ุชูุธูู ุนููู ููุจุดุฑุฉ ุจุงูุจุฎุงุฑ ุจุฑููููู. ุชุฌูุน ูุฐู ุงูุฎุฏูุฉ ุจูู ุงูุงูุชูุงู ูุงูุชุฑุทูุจ ุงูุนููู ูุจุดุฑุชู ูุน ุชูุธูู ุนููู ูุชุฌุฏูุฏ ูุงูู. ููุฏู ูู:\n\n1.ุงูุจุฎุงุฑ (ุจูุงุก ุงููุฑุฏ)\n- ุชูุดูุท ุงูุจุดุฑุฉ ููุชุญ ุงููุณุงู.\n- ููุงุฆุฏ ูุงุก ุงููุฑุฏ: ูุณุงุนุฏ ุนูู ุชูุฏุฆุฉ ุงูุฌูุฏุ ูููู ูู ุงุญูุฑุงุฑ ุงูุฌูุฏุ ูุญุชูู ุนูู ูุถุงุฏุงุช ุงูุฃูุณุฏุฉ ูุจุดุฑุฉ ูููุง ูุธุงุฑุฉุ ูุฑุงุฆุญุชู ุงูุทูุจุฉ ุชุฎูู ุงูุชูุชุฑ.\n\n2 ุฅุฒุงูุฉ ุงูุฑุคูุณ ุงูุณูุฏุงุก\n- ุชูููุงุช ูุทููุฉ ุชููู ุงููุณุงู ูู ุงูุดูุงุฆุจ.\n\n3. ููุดุฑ ูููุชุฑูุฌููุง ุงูููุนุด\n- ุจุงุณุชุฎุฏุงู ุงูููุดุฑ ุงููููู ุงูููุนุด ูู ูููุชุฑูุฌููุงุ ุณูููู ุจุชูุดูุฑ ูุทูู ูุฅุฒุงูุฉ ุงูุฎูุงูุง ุงูููุชุฉุ ููุง ูุชุฑู ุจุดุฑุชู ูุงุนูุฉ ููููุฉ.\n\n4.ููุงุน ุงููุญู ูู ูููุงูุงูุง\n- ููุถุน ููุงุน ุงููุญู ูู ูููุงูุงูุง ูุงูุชุตุงุต ุงูุฒููุช ูุงูุดูุงุฆุจ ูู ุงููุณุงูุ ูุชุฑู ุงูุจุดุฑุฉ ูุธููุฉ ูููุชุนุดุฉ.\n- ุชุชู ุฅุฒุงูุฉ ุงูููุงุน ุจููุดูุฉ ุจุงุฑุฏุฉ ูุชูููู ุงูุชููุฌ ูุชุฑุทูุจ ุงูุจุดุฑุฉ.\n\n== ููุท ูุนููุฉ (ุญุงุฑ ูุจุงุฑุฏ) ูุฌุงููุฉ ==\n\nุงุญุฌุฒ ุงูุขู ูุชุฌุฑุจุฉ ุชุฃูู ุจุฑููููู ูุงูุญุตูู ุนูู ุจุดุฑุฉ ุตุญูุฉ ููุดุฑูุฉ."
                },
                {
                    name_en: "Face Mask",
                    name_ar: "ูุงุณู ูููุฌู",
                    duration: "10m",
                    price: 15,
                    description_en: "",
                    description_ar: ""
                },
                {
                    name_en: "Nose Cleaning Strips",
                    name_ar: "ูุฒูุฉ ุงูุฃูู",
                    duration: "5m",
                    price: 5,
                    description_en: "For cleaning blackheads",
                    description_ar: "ูุชูุธูู ุงูุฑุคูุณ ุงูุณูุฏุงุก"
                },
                {
                    name_en: "Face Wax - Nose",
                    name_ar: "ุดูุน ูุฅุฒุงูุฉ ุดุนุฑ ุงููุฌู - ุงูุฃูู",
                    duration: "5m",
                    price: 10,
                    description_en: "Face hair removal session with wax including face, ear, nose",
                    description_ar: "ุฌูุณุฉ ุงุฒุงูุฉ ุดุนุฑ ุงููุฌู ุจุงูุดูุน ุดุงูู ุงููุฌู ุงูุฃุฐู ุงูุฃูู"
                },
                {
                    name_en: "Face Wax - Ears",
                    name_ar: "ุดูุน ูุฅุฒุงูุฉ ุดุนุฑ ุงููุฌู - ุงูุฃุฐููู",
                    duration: "10m",
                    price: 15,
                    description_en: "Face hair removal session with wax including face, ear, nose",
                    description_ar: "ุฌูุณุฉ ุงุฒุงูุฉ ุดุนุฑ ุงููุฌู ุจุงูุดูุน ุดุงูู ุงููุฌู ุงูุฃุฐู ุงูุฃูู"
                },
                {
                    name_en: "Face Wax - Full Waxing",
                    name_ar: "ุดูุน ูุฅุฒุงูุฉ ุดุนุฑ ุงููุฌู - ุดูุน ูุงูู",
                    duration: "15m",
                    price: 30,
                    description_en: "Face hair removal session with wax including face, ear, nose",
                    description_ar: "ุฌูุณุฉ ุงุฒุงูุฉ ุดุนุฑ ุงููุฌู ุจุงูุดูุน ุดุงูู ุงููุฌู ุงูุฃุฐู ุงูุฃูู"
                }
            ]
        }
    };

    const employeeWorkingHours = {
        "Abdulkareem": ["12:00", "00:00"],
        "Hadi": ["12:00", "00:00"],
        "Khalid": ["12:00", "00:00"],
        "Tariq": ["12:00", "00:00"],
        "Mahmoud": ["12:00", "00:00"]
    };

    const barbers = {
        "Abdulkareem": { en: "Abdulkareem", ar: "ุนุจุฏุงููุฑูู" },
        "Hadi": { en: "Hadi (Pub)", ar: "ูุงุฏู" },
        "Khalid": { en: "Khalid", ar: "ุฎุงูุฏ" },
        "Tariq": { en: "Tariq", ar: "ุทุงุฑู" },
        "Mahmoud": { en: "Mahmoud", ar: "ูุญููุฏ" }
    };

    const translations = {
        'summary-title': { ar: 'ููุฎุต ุงูุญุฌุฒ:', en: 'Booking Summary:' },
        'selected-services': { ar: 'ุงูุฎุฏูุงุช ุงููุฎุชุงุฑุฉ:', en: 'Selected Services:' },
        'total-duration': { ar: 'ุงููุฏุฉ ุงูุฅุฌูุงููุฉ:', en: 'Total Duration:' },
        'total-price': { ar: 'ุงูุณุนุฑ ุงูุฅุฌูุงูู:', en: 'Total Price:' },
        'datetime-label': { ar: 'ุงุฎุชุฑ ุงูุชุงุฑูุฎ ูุงูููุช:', en: 'Choose Date and Time:' },
        'name-label': { ar: 'ุงูุงุณู:', en: 'Name:' },
        'phone-label': { ar: 'ุฑูู ุงููุงุชู:', en: 'Phone Number:' },
        'submit-button': { ar: 'ุงุญุฌุฒ ุงูุขู', en: 'Book Now' },
        'whatsapp-message': {
            ar: "๐ฑ ุณูุชู ุชุฃููุฏ ุญุฌุฒู ุนูู ุงููุงุชุณุงุจ. ๐ฒ ุณูุตูู ุฑุฏูุง ุจุงูุชุฃููุฏ ูุฑูุจุงู! โ๏ธ",
            en: "๐ฑ Your booking will be confirmed via WhatsApp. ๐ฒ We'll respond with confirmation soon! โ๏ธ"
        }
    };

    let selectedServices = [];
    let currentLanguage = 'ar';
    let totalDuration = 0;
    let totalPrice = 0;
    let selectedBarber = '';

    const languageOptions = document.querySelectorAll('.language-option');
    const categoriesContainer = document.querySelector('.button-grid.categories');
    const servicesContainer = document.querySelector('.button-grid.services');
    const barberContainer = document.querySelector('.button-grid.barbers');
    const form = document.getElementById('bookingForm');

    if (languageOptions) {
        languageOptions.forEach(option => {
            option.addEventListener('click', () => {
                const lang = option.dataset.lang;
                currentLanguage = lang;
                document.documentElement.lang = lang;
                document.body.setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');
                languageOptions.forEach(opt => opt.classList.remove('active'));
                option.classList.add('active');
                updateLanguage();
                if (categoriesContainer) {
                    categoriesContainer.innerHTML = '';
                    initializeCategories(categoriesContainer);
                }
                if (servicesContainer) {
                    servicesContainer.innerHTML = '';
                    const selectedCategoryButton = document.querySelector('.category-button.selected');
                    if (selectedCategoryButton) {
                        populateServices(selectedCategoryButton.dataset.key);
                    }
                }
                if (barberContainer) {
                    barberContainer.innerHTML = '';
                    initializeBarbers(barberContainer);
                }
            });
        });
    } else {
        console.error('Language options not found');
    }

    if (categoriesContainer) {
        initializeCategories(categoriesContainer);
    } else {
        console.error('Categories container not found');
    }

    if (barberContainer) {
        initializeBarbers(barberContainer);
    } else {
        console.error('Barber container not found');
    }

    if (form) {
        form.addEventListener('submit', handleFormSubmit);
    } else {
        console.error('Booking form not found');
    }

    updateSummary();

    function updateLanguage() {
        const elements = {
            'main-title': { ar: 'ุงุญุฌุฒ ููุนุฏู', en: 'Book Your Appointment' },
            'category-label': { ar: 'ุงุฎุชุฑ ุงููุฆุฉ:', en: 'Choose Category:' },
            'service-label': { ar: 'ุงุฎุชุฑ ุงูุฎุฏูุฉ:', en: 'Choose Service:' },
            'summary-title': { ar: 'ููุฎุต ุงูุญุฌุฒ:', en: 'Booking Summary:' },
            'selected-services': { ar: 'ุงูุฎุฏูุงุช ุงููุฎุชุงุฑุฉ:', en: 'Selected Services:' },
            'total-duration': { ar: 'ุงููุฏุฉ ุงูุฅุฌูุงููุฉ:', en: 'Total Duration:' },
            'total-price': { ar: 'ุงูุณุนุฑ ุงูุฅุฌูุงูู:', en: 'Total Price:' },
            'barber-label': { ar: 'ุงุฎุชุฑ ุงูุญูุงู:', en: 'Choose Barber:' },
            'datetime-label': { ar: 'ุงุฎุชุฑ ุงูุชุงุฑูุฎ ูุงูููุช:', en: 'Choose Date and Time:' },
            'name-label': { ar: 'ุงูุงุณู:', en: 'Name:' },
            'phone-label': { ar: 'ุฑูู ุงููุงุชู:', en: 'Phone Number:' },
            'submit-button': { ar: 'ุงุญุฌุฒ ุงูุขู', en: 'Book Now' }
        };

        Object.entries(elements).forEach(([id, labels]) => {
            const element = document.getElementById(id);
            if (element) element.textContent = labels[currentLanguage];
        });
        const whatsappMessage = document.getElementById('whatsapp-message');
        if (whatsappMessage) {
            whatsappMessage.textContent = translations['whatsapp-message'][currentLanguage];
        }

        updateCategoriesLanguage();
        updateServicesLanguage();
        updateBarbersLanguage();
        updateSummary();
    }

    function updateCategoriesLanguage() {
        const categoryButtons = document.querySelectorAll('.category-button');
        categoryButtons.forEach(button => {
            const category = button.dataset[currentLanguage];
            if (category) button.textContent = category;
        });
    }

    function updateServicesLanguage() {
        const serviceButtons = document.querySelectorAll('.service-button');
        serviceButtons.forEach(button => {
            const serviceName = button.dataset[currentLanguage];
            const service = Object.values(categories).flatMap(cat => cat.services).find(s => s.name_en === serviceName || s.name_ar === serviceName);
            if (service) {
                const name = currentLanguage === 'ar' ? service.name_ar : service.name_en;
                button.innerHTML = `${name}<br>(${service.duration} - SAR ${service.price})`;
            }
        });
    }

    function updateBarbersLanguage() {
        const barberButtons = document.querySelectorAll('.barber-button');
        barberButtons.forEach(button => {
            const barber = button.dataset.key;
            button.textContent = barbers[barber][currentLanguage];
        });
    }

    function initializeCategories(categoriesContainer) {
        Object.keys(categories).forEach(key => {
            const category = categories[key];
            const button = createButton(category[currentLanguage], 'category-button');
            button.dataset.en = category.en;
            button.dataset.ar = category.ar;
            button.dataset.key = key;
            button.addEventListener('click', (e) => {
                e.preventDefault();
                document.querySelectorAll('.category-button').forEach(btn => btn.classList.remove('selected'));
                button.classList.add('selected');
                populateServices(key);
            });
            categoriesContainer.appendChild(button);
        });
    }

    function populateServices(categoryKey) {
        if (!servicesContainer) {
            console.error('Services container not found');
            return;
        }
        servicesContainer.innerHTML = '';
        const category = categories[categoryKey];
        category.services.forEach(service => {
            const name = currentLanguage === 'ar' ? service.name_ar : service.name_en;
            const serviceButton = createButton(`${name}<br>(${service.duration} - SAR ${service.price})`, 'service-button');
            serviceButton.dataset.en = service.name_en;
            serviceButton.dataset.ar = service.name_ar;

            const descriptionBox = document.createElement('div');
            descriptionBox.className = 'service-description';
            descriptionBox.textContent = currentLanguage === 'ar' ? service.description_ar : service.description_en;
            serviceButton.appendChild(descriptionBox);

            serviceButton.addEventListener('click', (e) => {
                e.preventDefault();
                toggleService(serviceButton, service);
            });
            servicesContainer.appendChild(serviceButton);
        });
    }

    function toggleService(button, service) {
        button.classList.toggle('selected');
        const serviceName = currentLanguage === 'ar' ? service.name_ar : service.name_en;

        if (selectedServices.includes(serviceName)) {
            selectedServices = selectedServices.filter(s => s !== serviceName);
            totalDuration -= parseDuration(service.duration);
            totalPrice -= service.price;
        } else {
            selectedServices.push(serviceName);
            totalDuration += parseDuration(service.duration);
            totalPrice += service.price;
        }

        showServiceDescription(button, service);
        updateSummary();
    }

    function showServiceDescription(button, service) {
        const descriptionBox = button.querySelector('.service-description');
        if (descriptionBox) {
            const description = currentLanguage === 'ar' ? service.description_ar : service.description_en;
            if (description) {
                descriptionBox.textContent = description;
                descriptionBox.style.maxHeight = button.classList.contains('selected') ? `${descriptionBox.scrollHeight}px` : '0';
            } else {
                descriptionBox.style.display = 'none';
            }
        }
    }

    function initializeBarbers(barberContainer) {
        Object.keys(barbers).forEach(barber => {
            const button = createButton(barbers[barber][currentLanguage], 'barber-button');
            button.dataset.en = barbers[barber].en;
            button.dataset.ar = barbers[barber].ar;
            button.dataset.key = barber;
            button.addEventListener('click', (e) => {
                e.preventDefault();
                document.querySelectorAll('.barber-button').forEach(btn => btn.classList.remove('selected'));
                button.classList.add('selected');
                selectedBarber = barber;
                initializeDateTimePicker(barber);
            });
            barberContainer.appendChild(button);
        });
    }

    function handleFormSubmit(event) {
        event.preventDefault();
        const phoneInput = document.getElementById('phone');
        const phonePattern = /^05[0-9]{8}$/;

        if (!phonePattern.test(phoneInput.value)) {
            alert(currentLanguage === 'ar' ? 'ุฑูู ุงููุงุชู ูุฌุจ ุฃู ูุจุฏุฃ ุจู 05 ููุชููู ูู 10 ุฃุฑูุงู' : 'Phone number must start with 05 and be 10 digits long');
            return;
        }

        const bookingData = {
            name: document.getElementById('name').value,
            phone: document.getElementById('phone').value,
            services: Array.from(selectedServices),
            totalDuration: formatDuration(totalDuration),
            totalPrice: totalPrice,
            barber: selectedBarber,
            datetime: document.getElementById('datetime').value
        };

        sendBookingToWhatsApp(bookingData);
    }

    function sendBookingToWhatsApp(bookingData) {
        const message = `
========= 
${currentLanguage === 'ar' ? 'ุงูุงุณู' : 'Name'}: ${bookingData.name || ''}
${currentLanguage === 'ar' ? 'ุฑูู ุงููุงุชู' : 'Phone Number'}: ${bookingData.phone || ''}
${currentLanguage === 'ar' ? 'ุงูุฎุฏูุงุช' : 'Services'}: 
${bookingData.services.map(service => `* ${service}`).join('\n')}
${currentLanguage === 'ar' ? 'ุงููุฏุฉ ุงูุฅุฌูุงููุฉ' : 'Total Duration'}: ${bookingData.totalDuration}
${currentLanguage === 'ar' ? 'ุงูุณุนุฑ ุงูุฅุฌูุงูู' : 'Total Price'}: ${bookingData.totalPrice} SAR
${currentLanguage === 'ar' ? 'ุงูุญูุงู' : 'Barber'}: ${bookingData.barber || ''}
${currentLanguage === 'ar' ? 'ุงูุชุงุฑูุฎ ูุงูููุช' : 'Date and Time'}: ${bookingData.datetime || ''}
=========
        `;
        window.open(`https://wa.me/966599791440?text=${encodeURIComponent(message)}`, '_blank');
    }

    function createButton(text, className) {
        const button = document.createElement('button');
        button.innerHTML = text;
        button.classList.add(className);
        return button;
    }

    function parseDuration(duration) {
        if (duration.includes('h')) {
            const [hours, minutes] = duration.split('h');
            return parseInt(hours) * 60 + parseInt(minutes || 0);
        } else {
            return parseInt(duration) || 0;
        }
    }

    function formatDuration(minutes) {
        if (isNaN(minutes)) {
            return currentLanguage === 'ar' ? '0 ุฏูููุฉ' : '0 minutes';
        }
        const hours = Math.floor(minutes / 60);
        const mins = minutes % 60;
        if (currentLanguage === 'ar') {
            return hours > 0 ? `${hours} ุณุงุนุฉ ${mins} ุฏูููุฉ` : `${mins} ุฏูููุฉ`;
        } else {
            return hours > 0 ? `${hours} hour(s) ${mins} minute(s)` : `${mins} minute(s)`;
        }
    }

    function updateSummary() {
        const selectedServicesElement = document.getElementById('selected-services');
        const totalDurationElement = document.getElementById('total-duration');
        const totalPriceElement = document.getElementById('total-price');

        if (!selectedServicesElement || !totalDurationElement || !totalPriceElement) {
            console.error('Summary elements not found');
            return;
        }

        const servicesLabel = translations['selected-services'][currentLanguage];
        const durationLabel = translations['total-duration'][currentLanguage];
        const priceLabel = translations['total-price'][currentLanguage];

        selectedServicesElement.innerHTML = `${servicesLabel} <span>${selectedServices.join(', ') || '-'}</span>`;
        totalDurationElement.innerHTML = `${durationLabel} <span>${formatDuration(totalDuration)}</span>`;
        totalPriceElement.innerHTML = `${priceLabel} <span>${totalPrice} ${currentLanguage === 'ar' ? 'ุฑูุงู' : 'SAR'}</span>`;
    }

    function initializeDateTimePicker(barber) {
        const datetimeInput = document.getElementById('datetime');
        if (!datetimeInput) {
            console.error('Datetime input not found');
            return;
        }
        const workingHours = employeeWorkingHours[barber];
        if (typeof flatpickr === 'function') {
            flatpickr.localize(flatpickr.l10ns.ar); // Pre-load Arabic locale
            flatpickr(datetimeInput, {
                enableTime: true,
                dateFormat: "Y-m-d H:i",
                minTime: workingHours[0],
                maxTime: workingHours[1],
                locale: currentLanguage === 'ar' ? 'ar' : 'en',
                time_24hr: true,
                minuteIncrement: 15,
                onChange: function(selectedDates, dateStr, instance) {
                    console.log("Selected date and time:", dateStr);
                }
            });
        } else {
            console.error('Flatpickr is not loaded');
            datetimeInput.type = 'datetime-local';
            datetimeInput.step = '900'; // 15 minutes in seconds
        }
    }
});
